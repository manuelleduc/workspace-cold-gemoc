/**
 * generated by Xtext 2.10.0
 */
package fr.mleduc.tests;

import com.google.inject.Inject;
import fr.mleduc.mLang.Model;
import fr.mleduc.mMLang.Metamodel;
import fr.mleduc.tests.NewInjector;
import fr.mleduc.tests.SmartParseHelper;
import javax.inject.Provider;
import org.eclipse.xtend2.lib.StringConcatenation;
import org.eclipse.xtext.junit4.InjectWith;
import org.eclipse.xtext.junit4.XtextRunner;
import org.eclipse.xtext.junit4.validation.ValidationTestHelper;
import org.eclipse.xtext.resource.XtextResourceSet;
import org.eclipse.xtext.xbase.lib.Exceptions;
import org.eclipse.xtext.xbase.lib.Extension;
import org.junit.Test;
import org.junit.runner.RunWith;

@RunWith(XtextRunner.class)
@InjectWith(NewInjector.class)
@SuppressWarnings("all")
public class MLangParsingTest {
  @Inject
  private SmartParseHelper<Model> parseHelperM;
  
  @Inject
  private SmartParseHelper<Metamodel> parseHelperMM;
  
  @Inject
  @Extension
  private ValidationTestHelper _validationTestHelper;
  
  @Inject
  private Provider<XtextResourceSet> resourceSetProvider;
  
  @Test
  public void loadModel() {
    try {
      final XtextResourceSet ressourceSet = this.resourceSetProvider.get();
      StringConcatenation _builder = new StringConcatenation();
      _builder.append("package l");
      _builder.newLine();
      _builder.newLine();
      _builder.append("class String {}");
      _builder.newLine();
      _builder.newLine();
      _builder.append("class Long {}");
      _builder.newLine();
      _builder.newLine();
      _builder.append("class A {");
      _builder.newLine();
      _builder.append("\t");
      _builder.append("@ name: String [1..1]");
      _builder.newLine();
      _builder.append("\t");
      _builder.append("@ age: Long [1..1]");
      _builder.newLine();
      _builder.append("\t");
      _builder.append("@ friends: A [0..*]");
      _builder.newLine();
      _builder.append("}");
      _builder.newLine();
      final Metamodel mmp = this.parseHelperMM.parse(_builder, ressourceSet, "mmlang");
      StringConcatenation _builder_1 = new StringConcatenation();
      _builder_1.append("model ml metamodel l");
      _builder_1.newLine();
      _builder_1.newLine();
      _builder_1.append("instance a: A {");
      _builder_1.newLine();
      _builder_1.append("  ");
      _builder_1.append("name = \"Hello\"");
      _builder_1.newLine();
      _builder_1.append("  ");
      _builder_1.append("age = 1");
      _builder_1.newLine();
      _builder_1.append("  ");
      _builder_1.append("friends = {}");
      _builder_1.newLine();
      _builder_1.append("}");
      _builder_1.newLine();
      _builder_1.newLine();
      _builder_1.append("instance b: A {");
      _builder_1.newLine();
      _builder_1.append("  ");
      _builder_1.append("name = \"World\"");
      _builder_1.newLine();
      _builder_1.append("  ");
      _builder_1.append("age = 2");
      _builder_1.newLine();
      _builder_1.append("  ");
      _builder_1.append("friends = {a}");
      _builder_1.newLine();
      _builder_1.append("}");
      _builder_1.newLine();
      final Model mp = this.parseHelperM.parse(_builder_1, ressourceSet, "mlang");
      this._validationTestHelper.assertNoErrors(mmp);
      this._validationTestHelper.assertNoErrors(mp);
    } catch (Throwable _e) {
      throw Exceptions.sneakyThrow(_e);
    }
  }
}
